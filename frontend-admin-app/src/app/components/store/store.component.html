<mat-tab-group>
    <mat-tab label="Detalle de tienda" style="height: 100vh; padding:30px">
        <mat-card class="register-card text-center">
            <mat-card-content>
                <form class="register-form">
                    <div class="row">
                        <div class="col-6">
                            <h4>{{ 'STORES_PAGE.SHOP_DATA' | translate }}</h4>
                            <table class="table-register" width="100%" cellspacing="0">
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_NAME' | translate }}" [(ngModel)]="store.name" name="name" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_USERNAME' | translate }}" [(ngModel)]="store.username" name="username" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_PASSWORD' | translate }}" [(ngModel)]="store.password" type="password" name="password">
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_EMAIL' | translate }}" [(ngModel)]="store.email" type="email" name="email" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-6" *ngIf="user_role === 'ADMIN_ROLE'">
                            <h4>{{ 'STORES_PAGE.CONNECTION_DATA' | translate }}</h4>
                            <table class="table-register" width="100%" cellspacing="0">
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_DBURL' | translate }}" [(ngModel)]="store.database_url" name="database_url" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_DBPORT' | translate }}" [(ngModel)]="store.database_port" name="database_port" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_DBNAME' | translate }}" [(ngModel)]="store.database_name" name="database_name" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_DBUSERNAME' | translate }}" [(ngModel)]="store.database_username" name="database_username" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.PLACEHOLDER_DBPASSWORD' | translate }}" [(ngModel)]="store.database_password" type="password" name="database_password" required>
                                        </mat-form-field>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="register-full-width">
                                            <mat-checkbox name="commerce_password" [(ngModel)]="commerce_password">Â¿{{ 'STORES_PAGE.COMMERCE_PASSWORD' | translate }}?</mat-checkbox>
                                        </div>
                                        <mat-form-field *ngIf="commerce_password" class="register-full-width">
                                            <input matInput placeholder="{{ 'STORES_PAGE.COMMERCE_PASSWORD' | translate }}" [(ngModel)]="store.commerce_password" type="password" name="commerce_password">
                                        </mat-form-field>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <h4 class="text-center">{{ 'STORES_PAGE.LOGO' | translate }}</h4>
                            <button (click)="removeImage(0)" class="btn btn-danger" *ngIf="store.logo_img">X</button>
                            <div style="height: 150px; border: 1px solid lightgray">
                                <img *ngIf="store.logo_img" [src]="logo_imgURL" style="height: 150px">
                                <input *ngIf="!store.logo_img" (change)="selectLogoImage($event); preview(0, $event.target.files)" type="file" id="logo_file" style="margin-top: 70px">
                            </div>
                            <br>
                            <h4 class="text-center">{{ 'STORES_PAGE.BACKGROUND' | translate }}</h4>
                            <div *ngFor="let i of [0,1,2,3,4]">
                                <button (click)="removeImage(1, i)" class="btn btn-danger" *ngIf="store.background_img[i] !== null">X</button>
                                <div style="height: 250px; border: 1px solid lightgray">
                                    <img *ngIf="store.background_img[i] !== null" bind-src="BGimagePath + store.background_img[i]" style="height: 250px">
                                    <img *ngIf="store.background_img[i] === null" bind-src="background_imgURL[i]"style="height: 250px">
                                    <input *ngIf="store.background_img[i] === null && !background_imgURL[i]" (change)="selectBGImage($event, 0); preview(1, $event.target.files, 0)" type="file" id="bg_file_{{i}}" style="margin-top: 110px">
                                </div>
                                <br>
                            </div>
                            <!--
                            <button (click)="removeImage(1, 1)" class="btn btn-danger" *ngIf="store.background_img">X</button>
                            <div style="height: 250px; border: 1px solid lightgray">
                                <img *ngIf="store.background_img_1" [src]="background_imgURL_1" style="height: 250px">
                                <input *ngIf="!store.background_img_1" (change)="selectBGImage($event, 1); preview(1, $event.target.files, 1)" type="file" id="bg_file_1" style="margin-top: 110px">
                            </div>
                            <br>
                            <button (click)="removeImage(1, 2)" class="btn btn-danger" *ngIf="store.background_img">X</button>
                            <div style="height: 250px; border: 1px solid lightgray">
                                <img *ngIf="store.background_img_2" [src]="background_imgURL_2" style="height: 250px">
                                <input *ngIf="!store.background_img_2" (change)="selectBGImage($event, 2); preview(1, $event.target.files, 2)" type="file" id="bg_file_2" style="margin-top: 110px">
                            </div>
                            <br>
                            <button (click)="removeImage(1, 3)" class="btn btn-danger" *ngIf="store.background_img">X</button>
                            <div style="height: 250px; border: 1px solid lightgray">
                                <img *ngIf="store.background_img_3" [src]="background_imgURL_3" style="height: 250px">
                                <input *ngIf="!store.background_img_3" (change)="selectBGImage($event, 3); preview(1, $event.target.files, 3)" type="file" id="bg_file_3" style="margin-top: 110px">
                            </div>
                            <br>
                            <button (click)="removeImage(1, 4)" class="btn btn-danger" *ngIf="store.background_img">X</button>
                            <div style="height: 250px; border: 1px solid lightgray">
                                <img *ngIf="store.background_img_4" [src]="background_imgURL_4" style="height: 250px">
                                <input *ngIf="!store.background_img_4" (change)="selectBGImage($event, 4); preview(1, $event.target.files, 4)" type="file" id="bg_file_4" style="margin-top: 110px">
                            </div>
                            <br>
                            <button (click)="removeImage(1, 5)" class="btn btn-danger" *ngIf="store.background_img">X</button>
                            <div style="height: 250px; border: 1px solid lightgray">
                                <img *ngIf="store.background_img_5" [src]="BGimagePath + background_imgURL_5" style="height: 250px">
                                <input *ngIf="!store.background_img_5" (change)="selectBGImage($event, 5); preview(1, $event.target.files, 5)" type="file" id="bg_file_5" style="margin-top: 110px">
                            </div>
                            -->
                        </div>
                        <div class="col-6">
                            <div *ngIf="user_role === 'ADMIN_ROLE'">
                                <h4 class="text-center">{{ 'STORES_PAGE.STORE_TYPE' | translate }}</h4>
                                <select style="width: 90%; height: 40px;" name="store_type" [(ngModel)]="store.store_type" required>
								    <option disabled hidden [ngValue]="0">{{ 'STORES_PAGE.CHOOSE_ONE' | translate }}</option>
								    <option style="height: 30px" *ngFor="let type of storeTypes" [ngValue]="type">{{ type }}</option>
							    </select>
                                <h4 class="text-center">{{ 'STORES_PAGE.USER' | translate }}</h4>
                                <select style="width: 90%; height: 40px;" name="user" [(ngModel)]="store.user" required>
								    <option disabled hidden [ngValue]="0">{{ 'STORES_PAGE.CHOOSE_ONE' | translate }}</option>
								    <option style="height: 30px" *ngFor="let user of userList" [ngValue]="user._id">{{ user.username }}</option>
                                </select>
                            </div>
                            <mat-card-actions style="margin-top: 50px">
                                <button mat-raised-button style="height: 70px; font-size:30px" (click)="updateStore()" color="primary">Actualizar tienda</button>
                            </mat-card-actions>
                        </div>
                    </div>
                </form>
                <mat-spinner [style.display]="showSpinner ? 'block' : 'none'"></mat-spinner>
            </mat-card-content>
        </mat-card>
    </mat-tab>
    <mat-tab label="Lista de clientes" style="height: 100vh; padding:30px">
        <mat-card class="register-card text-center">
            <mat-card-header>
                <h4>Lista de clientes</h4>
            </mat-card-header>
            <mat-card-content>
                <ul class="list-group">
                    <li (click)="clientDetail(client)" class="list-group-item" *ngFor="let client of clients" style="cursor: pointer;">
                        {{ client.name }} - {{ client.email }} - {{ client.phone }}
                        <img bind-src="client.signature ? (signaturePath + client.signature): noImage" alt="{{ client.signature }}" style="float: right; width: 40px; height: 40px; border: 1px solid black; border-radius: 5px; padding: 5px">
                    </li>
                </ul>
            </mat-card-content>
        </mat-card>

    </mat-tab>
</mat-tab-group>
